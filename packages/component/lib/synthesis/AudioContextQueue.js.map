{"version":3,"sources":["../../src/synthesis/AudioContextQueue.js"],"names":["audioContextClass","window","AudioContext","webkitAudioContext","consumer","queue","length","AudioContextConsumer","start","utterance","push","startConsumer","splice","stop"],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAAA;;;;;;;AAGE,oBAAkF;AAAA,QAAtEA,iBAAsE,uEAAlDC,OAAOC,YAAP,IAAuBD,OAAOE,kBAAoB;AAAA;;AAChF,SAAKH,iBAAL,GAAyBA,iBAAzB;AACA,SAAKI,QAAL,GAAgB,IAAhB;AACA,SAAKC,KAAL,GAAa,EAAb;AACD;;;;;;;;;;sBAGQ,KAAKA,KAAL,CAAWC,MAAX,IAAqB,CAAC,KAAKF,Q;;;;;AAChC,qBAAKA,QAAL,GAAgB,IAAIG,8BAAJ,EAAhB;;uBACM,KAAKH,QAAL,CAAcI,KAAd,CAAoB,KAAKH,KAAzB,EAAgC,KAAKL,iBAArC,C;;;AACN,qBAAKI,QAAL,GAAgB,IAAhB;;;;;;;;;;;;;;;;;;;;yBAICK,S,EAAW;AACd,WAAKJ,KAAL,CAAWK,IAAX,CAAgBD,SAAhB;AACA,WAAKE,aAAL;AACD;;;2BAEM;AACL,WAAKN,KAAL,CAAWO,MAAX,CAAkB,CAAlB;AACA,WAAKR,QAAL,IAAiB,KAAKA,QAAL,CAAcS,IAAd,EAAjB;AACD","file":"AudioContextQueue.js","sourcesContent":["import AudioContextConsumer from './AudioContextConsumer';\n\nexport default class {\n  constructor(audioContextClass = window.AudioContext || window.webkitAudioContext) {\n    this.audioContextClass = audioContextClass;\n    this.consumer = null;\n    this.queue = [];\n  }\n\n  async startConsumer() {\n    while (this.queue.length && !this.consumer) {\n      this.consumer = new AudioContextConsumer();\n      await this.consumer.start(this.queue, this.audioContextClass);\n      this.consumer = null;\n    }\n  }\n\n  push(utterance) {\n    this.queue.push(utterance);\n    this.startConsumer();\n  }\n\n  stop() {\n    this.queue.splice(0);\n    this.consumer && this.consumer.stop();\n  }\n}\n"]}