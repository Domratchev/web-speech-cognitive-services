{"version":3,"sources":["../../src/synthesis/AudioContextConsumer.js"],"names":["queue","audioContextClass","window","AudioContext","webkitAudioContext","audioContext","Error","utterance","shift","playingUtterance","play","close","stop"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;iDACcA,K;;;;;;;;AAAOC,gBAAAA,iB,2DAAoBC,MAAM,CAACC,YAAP,IAAuBD,MAAM,CAACE,kB;;qBAC/D,KAAKC,Y;;;;;sBACD,IAAIC,KAAJ,CAAU,iBAAV,C;;;;;;sBAMEC,SAAS,GAAGP,KAAK,CAACQ,KAAN,E;;;;;AAClB,qBAAKC,gBAAL,GAAwBF,SAAxB;;uBAEMA,SAAS,CAACG,IAAV,CAAe,KAAKL,YAAL,KAAsB,KAAKA,YAAL,GAAoB,IAAIJ,iBAAJ,EAA1C,CAAf,C;;;AAEN,qBAAKQ,gBAAL,GAAwB,IAAxB;;;;;;;uBAGI,KAAKJ,Y;;;;;;;;;;AAAgB,qBAAKA,YAAL,CAAkBM,KAAlB,E;;;;;;;;;;;;;;;;;;;2BAIxB;AACL,WAAKF,gBAAL,IAAyB,KAAKA,gBAAL,CAAsBG,IAAtB,EAAzB;AACD","sourcesContent":["export default class {\n  async start(queue, audioContextClass = window.AudioContext || window.webkitAudioContext) {\n    if (this.audioContext) {\n      throw new Error('already started');\n    }\n\n    let utterance;\n\n    try {\n      while ((utterance = queue.shift())) {\n        this.playingUtterance = utterance;\n\n        await utterance.play(this.audioContext || (this.audioContext = new audioContextClass()));\n\n        this.playingUtterance = null;\n      }\n    } finally {\n      await this.audioContext && this.audioContext.close();\n    }\n  }\n\n  stop() {\n    this.playingUtterance && this.playingUtterance.stop();\n  }\n}\n"],"file":"AudioContextConsumer.js"}