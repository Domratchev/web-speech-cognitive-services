{"version":3,"sources":["../../src/synthesis/fetchSpeechData.js"],"names":["DEFAULT_LANGUAGE","DEFAULT_VOICE","SYNTHESIS_URL","accessToken","lang","outputFormat","pitch","rate","text","voice","volume","ssml","fetch","headers","Authorization","method","body","res","status","Error","arrayBuffer","fetchSpeechData"],"mappings":";;;;;;;;;;;;;;AAAA;;;;;;AAEA,IAAMA,mBAAmB,OAAzB;AACA,IAAMC,gBAAgB,gEAAtB;AACA,IAAMC,gBAAgB,6CAAtB;;;uFAEe;AAAA,QACbC,WADa,QACbA,WADa;AAAA,yBAEbC,IAFa;AAAA,QAEbA,IAFa,6BAENJ,gBAFM;AAAA,QAGbK,YAHa,QAGbA,YAHa;AAAA,QAIbC,KAJa,QAIbA,KAJa;AAAA,QAKbC,IALa,QAKbA,IALa;AAAA,QAMbC,IANa,QAMbA,IANa;AAAA,0BAObC,KAPa;AAAA,QAObA,KAPa,8BAOLR,aAPK;AAAA,QAQbS,MARa,QAQbA,MARa;AAAA;AAAA;AAAA;AAAA;AAAA;AAUPC,gBAVO,GAUA,yBAAU,EAAEP,UAAF,EAAQE,YAAR,EAAeC,UAAf,EAAqBC,UAArB,EAA2BC,YAA3B,EAAkCC,cAAlC,EAAV,CAVA;AAAA;AAAA,mBAYKE,MAAMV,aAAN,EAAqB;AACrCW,uBAAS;AACPC,+BAAe,YAAYX,WADpB;AAEP,gCAAgB,sBAFT;AAGP,4CAA4BE;AAHrB,eAD4B;AAMrCU,sBAAQ,MAN6B;AAOrCC,oBAAML;AAP+B,aAArB,CAZL;;AAAA;AAYPM,eAZO;;AAAA,kBAsBTA,IAAIC,MAAJ,KAAe,GAtBN;AAAA;AAAA;AAAA;;AAAA,kBAuBL,IAAIC,KAAJ,mDAA2DF,IAAIC,MAA/D,CAvBK;;AAAA;AAAA,6CA0BND,IAAIG,WAAJ,EA1BM;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;WAAeC,e;;;;SAAAA,e","file":"fetchSpeechData.js","sourcesContent":["import buildSSML from './buildSSML';\n\nconst DEFAULT_LANGUAGE = 'en-US';\nconst DEFAULT_VOICE = 'Microsoft Server Speech Text to Speech Voice (en-US, JessaRUS)'\nconst SYNTHESIS_URL = 'https://speech.platform.bing.com/synthesize';\n\nexport default async function fetchSpeechData({\n  accessToken,\n  lang = DEFAULT_LANGUAGE,\n  outputFormat,\n  pitch,\n  rate,\n  text,\n  voice = DEFAULT_VOICE,\n  volume\n}) {\n  const ssml = buildSSML({ lang, pitch, rate, text, voice, volume });\n\n  const res = await fetch(SYNTHESIS_URL, {\n    headers: {\n      Authorization: 'Bearer ' + accessToken,\n      'Content-Type': 'application/ssml+xml',\n      'X-Microsoft-OutputFormat': outputFormat\n    },\n    method: 'POST',\n    body: ssml\n  });\n\n  if (res.status !== 200) {\n    throw new Error(`Failed to synthesize speech, server returned ${ res.status }`);\n  }\n\n  return res.arrayBuffer();\n}\n"]}